# 실시간 뉴스 검색 애플리케이션 v18.2

네이버 뉴스 API를 활용한 실시간 뉴스 검색 및 관리 데스크톱 애플리케이션입니다.

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![PyQt6](https://img.shields.io/badge/PyQt6-6.0+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

## 📋 주요 기능

### 🔍 뉴스 검색 및 관리
- **멀티 탭 검색**: 여러 키워드를 동시에 모니터링
- **실시간 자동 새로고침**: 10분~6시간 간격으로 자동 업데이트
- **제외 키워드**: 불필요한 뉴스 자동 필터링 (예: `"AI" -광고 -홍보`)
- **북마크 기능**: 중요한 기사 저장 및 관리

### 📊 데이터 관리
- **로컬 데이터베이스**: SQLite 기반 영구 저장
- **읽음/안읽음 상태**: 기사별 읽음 표시 및 관리
- **결과 내 필터링**: 제목/본문 내용으로 빠른 검색
- **정렬 옵션**: 최신순/오래된순 선택
- **데이터 내보내기**: TXT 형식으로 검색 결과 저장

### 🎨 사용자 인터페이스
- **라이트/다크 테마**: 눈의 피로를 줄이는 테마 선택
- **하이라이트 기능**: 키워드 및 필터 텍스트 자동 강조
- **시스템 트레이**: 백그라운드 실행 지원
- **탭 관리**: 드래그 앤 드롭으로 탭 순서 변경

### 🔔 알림 기능
- **새 뉴스 알림**: 백그라운드 실행 시 시스템 알림
- **탭별 새 기사 카운트**: 읽지 않은 뉴스 개수 표시

## 🚀 설치 방법

### 1. 사전 요구사항
- Python 3.8 이상
- pip (Python 패키지 관리자)

### 2. 라이브러리 설치

```bash
pip install PyQt6 requests
```

### 3. 네이버 API 키 발급
1. [네이버 개발자 센터](https://developers.naver.com/apps) 접속
2. 애플리케이션 등록
3. 검색 API 선택
4. Client ID 및 Client Secret 발급

## 💻 사용 방법

### 프로그램 실행

```bash
python news_scraper.py
```

### 초기 설정

1. **API 키 입력**
   - 프로그램 실행 후 `설정` 버튼 클릭
   - Client ID와 Client Secret 입력
   - 확인 클릭

2. **자동 새로고침 설정**
   - 설정 메뉴에서 새로고침 간격 선택
   - 10분 / 30분 / 1시간 / 3시간 / 6시간 / 안함

3. **테마 선택**
   - 라이트 모드 또는 다크 모드 선택

### 탭 관리

#### 새 탭 추가
- `+ 새 탭 추가` 버튼 클릭
- 검색 키워드 입력
- 제외 키워드 사용: `"정확한 검색어" -제외어1 -제외어2`

#### 탭 이름 변경
- 탭을 더블클릭하여 키워드 수정

#### 탭 닫기
- 탭의 X 버튼 클릭

### 뉴스 검색 및 필터링

#### 기본 검색
```
키워드: 방심위
결과: "방심위" 포함된 모든 뉴스
```

#### 제외 키워드 사용
```
키워드: "인공지능" -광고 -홍보
결과: "인공지능"을 포함하되 "광고", "홍보"는 제외
```

#### 결과 내 필터링
- 상단 필터 입력란에 검색어 입력
- 실시간으로 결과 필터링
- 여러 단어 입력 가능 (공백으로 구분)

### 기사 관리

#### 읽음 처리
- 기사 링크 클릭 시 자동으로 읽음 표시
- 읽은 기사는 배경색이 변경됨

#### 북마크
- `[북마크]` 링크 클릭으로 추가/해제
- 북마크 탭에서 모든 북마크 확인

#### 모두 읽음으로
- 하단 `모두 읽음으로` 버튼 클릭
- 현재 탭의 모든 기사를 읽음 처리

### 결과 저장

1. `결과 저장` 버튼 클릭
2. 필터 적용 시 저장 옵션 선택
   - 필터링된 결과만
   - 전체 결과
3. 파일명 지정 및 저장

## 📁 파일 구조

```
news_scraper/
├── news_scraper.py              # 메인 프로그램
├── news_scraper_config.json     # 설정 파일 (자동 생성)
├── news_database.db             # 데이터베이스 (자동 생성)
└── README.md                    # 사용 설명서
```

## ⚙️ 설정 파일 구조

`news_scraper_config.json`:
```json
{
    "app_settings": {
        "refresh_interval_index": 2,
        "theme_index": 0,
        "client_id": "YOUR_CLIENT_ID",
        "client_secret": "YOUR_CLIENT_SECRET",
        "window_geometry": "..."
    },
    "tabs": ["방심위", "과방위", "인공지능"]
}
```

## 🗄️ 데이터베이스 관리

### 오래된 기사 삭제
- 설정 메뉴 → `오래된 기사 삭제` 버튼
- 발행일로부터 30일 경과한 기사 삭제
- **북마크된 기사는 보존**

### 전체 기사 삭제
- 설정 메뉴 → `모든 기사 삭제` 버튼
- 모든 기사 삭제 (북마크 제외)

### 데이터베이스 초기화
데이터베이스 파일을 삭제하고 재시작:
```bash
rm news_database.db
```

## 🔧 고급 기능

### 키보드 단축키
- 탭 더블클릭: 탭 이름 변경
- 드래그 앤 드롭: 탭 순서 변경

### 외부 링크 열기
- 기사 제목 클릭: 기본 브라우저에서 열기
- `[외부에서 열기]`: 강제로 외부 브라우저 사용

### 공유 기능
- `[공유]` 클릭으로 제목과 링크 클립보드 복사
- 다른 앱에 붙여넣기 가능

## ⚠️ 문제 해결

### API 오류

**401 오류 (인증 실패)**
- API 키 확인
- Client ID와 Secret 재확인

**429 오류 (호출 한도 초과)**
- 잠시 후 재시도
- 자동 새로고침 간격 늘리기

### 데이터베이스 오류

**데이터베이스 잠김 오류**
- 프로그램 완전 종료 후 재시작
- `news_database.db-wal` 및 `news_database.db-shm` 파일 삭제

### 네트워크 오류

**연결 시간 초과**
- 인터넷 연결 확인
- 방화벽 설정 확인

**SSL 오류**
- Python 인증서 업데이트
```bash
pip install --upgrade certifi
```

## 📊 성능 최적화

### 권장 설정
- **자동 새로고침**: 30분~1시간 (API 한도 고려)
- **탭 개수**: 5개 이하 (동시 검색 성능)
- **데이터 정리**: 월 1회 오래된 기사 삭제

### 데이터베이스 최적화
프로그램이 무거워지면:
1. 오래된 기사 삭제
2. 불필요한 북마크 정리
3. 필요시 전체 데이터 초기화

## 🔒 보안 및 개인정보

- API 키는 로컬에만 저장
- 모든 데이터는 사용자 컴퓨터에 저장
- 외부 서버로 데이터 전송 없음

**설정 파일 보안**
- `news_scraper_config.json`에 API Secret 포함
- 파일 공유 시 주의 필요
- Git 사용 시 `.gitignore`에 추가 권장

```gitignore
news_scraper_config.json
news_database.db
news_database.db-*
```

## 🐛 버그 리포트

버그 발견 시:
1. 오류 메시지 캡처
2. 재현 방법 기록
3. `news_scraper_config.json` 내용 확인 (API 키 제외)

## 📝 버전 히스토리

### v18.2 (현재 버전)
- 스레드 안전 데이터베이스 연결 개선
- WAL 모드 활성화로 성능 향상
- 네트워크 연결 관리 개선
- Worker 취소 메커니즘 추가
- 메모리 누수 방지 강화
- 장시간 실행 안정성 개선

### v18.1
- 멀티 탭 자동 새로고침 버그 수정
- 병렬 스레딩 모델 도입
- 필터링 하이라이트 기능 추가
- DB 데이터 관리 기능 추가
- 결과 저장 옵션 개선

## 🤝 기여

개선 아이디어나 버그 리포트는 환영합니다!

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능

## 👨‍💻 개발 정보

- **언어**: Python 3.8+
- **GUI 프레임워크**: PyQt6
- **데이터베이스**: SQLite3
- **API**: 네이버 검색 API

## 🔗 유용한 링크

- [네이버 개발자 센터](https://developers.naver.com/)
- [네이버 검색 API 가이드](https://developers.naver.com/docs/serviceapi/search/news/news.md)
- [PyQt6 공식 문서](https://www.riverbankcomputing.com/static/Docs/PyQt6/)

---

**문의사항이나 제안이 있으시면 언제든지 연락주세요!**